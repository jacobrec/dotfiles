#!/bin/bash

jweather_sync

tmpKelv=$(cat ~/.jacobscommandlineweather.txt | tail -n 1)
val=$(echo "scale=2;$tmpKelv/100-273.15" | bc)

readonly SYMBOL_WEATHER_SUNNY=' ‚òÄÔ∏è '
readonly SYMBOL_WEATHER_RAINY=' üåßÔ∏è '
readonly SYMBOL_WEATHER_SNOWY=' üå® '
readonly SYMBOL_WEATHER_STORMY=' ‚õà '
readonly SYMBOL_WEATHER_OVERCAST=' ‚òÅ '
readonly SYMBOL_WEATHER_CLOUDY=' ‚õÖ'
readonly SYMBOL_WEATHER_ERROR_NOINTERNET=' #'


local weather=" $SYMBOL_WEATHER_SUNNY"
weather="$(jweather_read)"
case $weather in
    0)
        jweather=$SYMBOL_WEATHER_SUNNY
        ;;
    1)
        jweather=$SYMBOL_WEATHER_CLOUDY
        ;;
    2)
        jweather=$SYMBOL_WEATHER_OVERCAST
        ;;
    3)
        jweather=$SYMBOL_WEATHER_RAINY
        ;;
    4)
        jweather=$SYMBOL_WEATHER_STORMY
        ;;
    5)
        jweather=$SYMBOL_WEATHER_SNOWY
        ;;
    -1)
        jweather=$SYMBOL_WEATHER_ERROR_NOINTERNET
        ;;
esac

if [ -1 = jweather ] || [ 0 = weather ] || [ 0 = $tmpKelv ]; then
    echo "No Weather"
else
    echo "$jweather$val¬∞C"
fi
